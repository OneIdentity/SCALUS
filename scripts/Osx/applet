#!/usr/bin/osascript
on checkit()
	
	set findcmd to do shell script "/usr/bin/mdfind kMDItemCFBundleIdentifier=com.oneidentity.scalus.macos | head -1"
	set cmdpath to findcmd & "/Contents/MacOS/scalus"
	set res to do shell script "test -f " & cmdpath & "; echo $?"
	set exitCode to res as number
	if (exitCode is not equal to 0) then
		display dialog "scalus was not found in path:" & cmdpath
	end if
	return cmdpath
end checkit

on open location theURL
	display dialog "launching URL " & theURL
	set cmdpath to checkit()
	do shell script cmdpath & " launch -u '" & theURL & "'"
	display dialog "launching URL -- Completed"
end open location

on runScalus()
	display dialog "Launching SCALUS"
	set cmdpath to checkit()
	do shell script cmdpath
	display dialog "Launching SCALUS -- Comnpleted"
end runScalus

run runScalus()